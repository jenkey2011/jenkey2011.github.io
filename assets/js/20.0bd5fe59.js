(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{340:function(t,e,s){"use strict";s.r(e);var a=s(4),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[s("img",{attrs:{src:"https://s2.ax1x.com/2020/02/20/3mricR.png",alt:"3mricR.png"}})]),t._v(" "),s("p",[s("code",[t._v("vuepress")]),t._v("是个静态网站（博客）生成器，具有非常好的加载性能和搜索引擎优化，如果你使用过"),s("code",[t._v("vue")]),t._v("的话，不妨试试，一定会让你爱不释手。")]),t._v(" "),s("p",[s("code",[t._v("vuepress")]),t._v("提供了几种部署方法，有"),s("code",[t._v("本地脚本")]),t._v("、"),s("code",[t._v("Travis CI")]),t._v("、"),s("code",[t._v("Netlify")]),t._v("，但是不能完全满足我的需求。所以我开发了一个"),s("code",[t._v("vuepress-deploy")]),t._v("的自动化部署工具。可以去"),s("code",[t._v("GitHub Action")]),t._v("市场查看："),s("a",{attrs:{href:"https://github.com/marketplace/actions/vuepress-deploy",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/marketplace/actions/vuepress-deploy"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特性"}},[t._v("#")]),t._v(" 特性")]),t._v(" "),s("ul",[s("li",[t._v("自动部署，可自由设置触发时机（如"),s("code",[t._v("push")]),t._v("完代码后）")]),t._v(" "),s("li",[t._v("同时跑多个部署任务")]),t._v(" "),s("li",[t._v("可以部署到本仓库、亦可部署到任何有权限的仓库")]),t._v(" "),s("li",[t._v("支持自定义"),s("code",[t._v("GitHub Pages")]),t._v("域名，即支持自定义"),s("code",[t._v("CNAME")])])]),t._v(" "),s("p",[t._v("在你项目仓库"),s("code",[t._v(".github/workflows")]),t._v("目录下创建一个 "),s("code",[t._v(".yml")]),t._v("文件，举例："),s("code",[t._v("vuepress-deploy.yml")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Build and Deploy\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("push"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-and-deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@master\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vuepress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jenkey2011/vuepress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy@master\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ACCESS_TOKEN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.ACCESS_TOKEN "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TARGET_REPO")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" username/repo\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TARGET_BRANCH")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" master\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BUILD_SCRIPT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yarn && yarn build\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BUILD_DIR")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" blog/.vuepress/dist/\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("CNAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//www.dachangxiaoyuan.top\n")])])]),s("p",[t._v("上述配置的结果是：每次推送代码，将自动构建、部署到"),s("code",[t._v("username/repo")]),t._v("的"),s("code",[t._v("master")]),t._v("分支。就是这么简单~")]),t._v(" "),s("blockquote",[s("p",[t._v("如果不了解"),s("code",[t._v("github workflow")]),t._v("什么的，看下面的"),s("a",{attrs:{href:"#step-by-step-guide"}},[t._v("详细教程")])])]),t._v(" "),s("h2",{attrs:{id:"使用示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用示例"}},[t._v("#")]),t._v(" 使用示例")]),t._v(" "),s("p",[t._v("仓库：")]),t._v(" "),s("ul",[s("li",[t._v("示例源码仓库："),s("a",{attrs:{href:"https://github.com/jenkey2011/vuepress-deploy-demo",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/jenkey2011/vuepress-deploy-demo"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("示例目标仓库："),s("a",{attrs:{href:"https://github.com/jenkey2011/vuepress-deploy-demo-target",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/jenkey2011/vuepress-deploy-demo-target"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("对应情况与部署文件设置：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("A")]),t._v(" TO "),s("code",[t._v("A:gh_pages")]),t._v(": "),s("code",[t._v("deploy-to-current-repo-gh_pages.yml")])]),t._v(" "),s("li",[s("code",[t._v("A")]),t._v(" TO "),s("code",[t._v("B:master")]),t._v(": "),s("code",[t._v("deploy-to-other-repo-master.yml")])]),t._v(" "),s("li",[s("code",[t._v("A")]),t._v(" TO "),s("code",[t._v("B:custom_branch")]),t._v(": "),s("code",[t._v("deploy-to-other-repo-custom_branch.yml")])])]),t._v(" "),s("p",[t._v("效果查看：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("部署任务详情: "),s("a",{attrs:{href:"https://github.com/jenkey2011/vuepress-deploy-demo/actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/jenkey2011/vuepress-deploy-demo/actions"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("code",[t._v("A")]),t._v(" TO "),s("code",[t._v("A:gh_pages")]),t._v(": "),s("a",{attrs:{href:"https://github.com/jenkey2011/vuepress-deploy-demo/tree/gh_pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/jenkey2011/vuepress-deploy-demo/tree/gh_pages"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("code",[t._v("A")]),t._v(" TO "),s("code",[t._v("B:master")]),t._v(":"),s("a",{attrs:{href:"https://github.com/jenkey2011/vuepress-deploy-demo-target/tree/master",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/jenkey2011/vuepress-deploy-demo-target/tree/master"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("code",[t._v("A")]),t._v(" TO "),s("code",[t._v("B:custom_branch")]),t._v(":"),s("a",{attrs:{href:"https://github.com/jenkey2011/vuepress-deploy-demo-target/tree/custom_branch",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/jenkey2011/vuepress-deploy-demo-target/tree/custom_branch"),s("OutboundLink")],1)])])]),t._v(" "),s("h2",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("含义")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("是否必须")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("ACCESS_TOKEN")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("github的token")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("secrets")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("是")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("TARGET_REPO")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("目标仓库，例： "),s("code",[t._v("jenkey2011/blog")]),t._v("。"),s("strong",[t._v("默认当前仓库")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("env")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("否")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("TARGET_REPO")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("目标仓库的分支，例："),s("code",[t._v("gh-pages")]),t._v("。"),s("strong",[t._v("默认 gh-pages")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("env")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("否")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("BUILD_SCRIPT")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("构建脚本 例： "),s("code",[t._v("yarn && yarn build")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("env")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("是")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("BUILD_DIR")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("构建产物的目录 e.g.: "),s("code",[t._v("blog/.vuepress/dist/")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("env")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("是")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("CNAME")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Github Pages 站点别名")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("env")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("no")])])])])]),t._v(" "),s("h3",{attrs:{id:"详细教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#详细教程"}},[t._v("#")]),t._v(" 详细教程")]),t._v(" "),s("h4",{attrs:{id:"创建token"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建token"}},[t._v("#")]),t._v(" 创建token")]),t._v(" "),s("p",[t._v("点击你的头像 > Settings > Developer settings > Personal access tokens > Generate new token.\n权限至少要勾选"),s("code",[t._v("repo")]),t._v("，不清楚的，直接无脑全选就行~ 问题不大，不要慌。")]),t._v(" "),s("p",[t._v("详细信息看："),s("a",{attrs:{href:"https://help.github.com/en/github/authenticating-to-github/authorizing-a-personal-access-token-for-use-with-saml-single-sign-on",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://help.github.com/en/github/authenticating-to-github/authorizing-a-personal-access-token-for-use-with-saml-single-sign-on"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"创建secrets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建secrets"}},[t._v("#")]),t._v(" 创建secrets")]),t._v(" "),s("p",[t._v("你的vuepress项目源码仓库下 > Settings > Secrets， 创建"),s("code",[t._v("ACCESS_TOKEN")]),t._v("， 值就填写你刚才创建的token，确定。")]),t._v(" "),s("h4",{attrs:{id:"创建一个任务文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建一个任务文件"}},[t._v("#")]),t._v(" 创建一个任务文件")]),t._v(" "),s("p",[t._v("在项目根目录下，创建"),s("code",[t._v(".github/workflows")]),t._v("，然后再创建一个 "),s("code",[t._v(".yml")]),t._v("文件，名字随便取，例："),s("code",[t._v("vuepress-deploy.yml")]),t._v("。")]),t._v(" "),s("p",[t._v("详细信息看："),s("a",{attrs:{href:"https://help.github.com/en/actions/automating-your-workflow-with-github-actions/configuring-a-workflow",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://help.github.com/en/actions/automating-your-workflow-with-github-actions/configuring-a-workflow"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"相关链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关链接"}},[t._v("#")]),t._v(" 相关链接")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("vuepress")]),t._v(": "),s("a",{attrs:{href:"https://vuepress.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://vuepress.vuejs.org/zh/"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("vuepress-deploy")]),t._v(": "),s("a",{attrs:{href:"https://github.com/jenkey2011/vuepress-deploy",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/jenkey2011/vuepress-deploy"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=n.exports}}]);